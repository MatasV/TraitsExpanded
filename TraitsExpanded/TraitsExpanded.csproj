<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <ProjectGuid>{295405B2-C1F5-428C-A412-63657A78A009}</ProjectGuid>
    <OutputType>Library</OutputType>
    <TargetFramework>net472</TargetFramework>
    <RuntimeIdentifier>win-x64</RuntimeIdentifier>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Content Update="SubModule.xml" />
  </ItemGroup>
  <ItemGroup>
    <Reference Include="SandBox.GauntletUI" Private="False">
      <HintPath>$(SandboxModuleBinRoot)\SandBox.GauntletUI.dll</HintPath>
    </Reference>
    <Reference Include="SandBox.View" Private="False">
      <HintPath>$(SandboxModuleBinRoot)\SandBox.View.dll</HintPath>
    </Reference>
    <Reference Include="SandBox.ViewModelCollection" Private="False">
      <HintPath>$(SandboxModuleBinRoot)\SandBox.ViewModelCollection.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.BattlEye.Client" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.BattlEye.Client.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.CampaignSystem" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.CampaignSystem.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.CampaignSystem.ViewModelCollection" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.CampaignSystem.ViewModelCollection.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Core" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Core.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Core.ViewModelCollection" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Core.ViewModelCollection.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Diamond" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Diamond.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Diamond.AccessProvider.Epic" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Diamond.AccessProvider.Epic.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Diamond.AccessProvider.Steam" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Diamond.AccessProvider.Steam.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Diamond.AccessProvider.Test" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Diamond.AccessProvider.Test.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.DotNet" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.DotNet.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.DotNet.AutoGenerated" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.DotNet.AutoGenerated.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Engine" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Engine.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Engine.AutoGenerated" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Engine.AutoGenerated.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Engine.GauntletUI" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Engine.GauntletUI.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.GauntletUI" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.GauntletUI.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.GauntletUI.Data" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.GauntletUI.Data.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.GauntletUI.ExtraWidgets" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.GauntletUI.ExtraWidgets.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.GauntletUI.PrefabSystem" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.GauntletUI.PrefabSystem.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.GauntletUI.TooltipExtensions" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.GauntletUI.TooltipExtensions.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.InputSystem" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.InputSystem.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Library" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Library.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Localization" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Localization.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade.AutoGenerated" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.AutoGenerated.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade.Diamond" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.Diamond.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade.GauntletUI.Widgets" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.GauntletUI.Widgets.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade.Helpers" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.Helpers.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.MountAndBlade.ViewModelCollection" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.MountAndBlade.ViewModelCollection.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.NavigationSystem" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.NavigationSystem.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Network" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Network.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.PlatformService" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.PlatformService.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.PlatformService.Epic" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.PlatformService.Epic.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.PlatformService.Steam" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.PlatformService.Steam.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.PlayerServices" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.PlayerServices.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.PSAI" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.PSAI.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.SaveSystem" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.SaveSystem.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Starter.DotNetCore" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Starter.DotNetCore.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.Starter.Library" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.Starter.Library.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.TwoDimension" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.TwoDimension.dll</HintPath>
    </Reference>
    <Reference Include="TaleWorlds.TwoDimension.Standalone" Private="False">
      <HintPath>$(GameBinRoot)\TaleWorlds.TwoDimension.Standalone.dll</HintPath>
    </Reference>
  </ItemGroup>
  <!-- Friendly error message in case someone forgets to set GameBinRoot in their Local -->
  <!-- todo: see if I can get this to run before any references are loaded -->
  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Error Text="Game install directory not defined. Check that your LocalConfiguration.props exists and sets the GameBinRoot property correctly. See: LocalConfiguration.props.example" Condition="('$(GameBinRoot)' == '')" />
    <Error Text="Game install directory '$(GameBinRoot)' does not exist. Please define the property GameBinRoot in $(LocalConfigurationFile) to match the local Bannerlord installation directory on your machine." Condition="('$(GameBinRoot)' != '') AND !Exists($(GameBinRoot))" />
  </Target>
  <Target Name="PostBuild" BeforeTargets="PostBuildEvent">
    <Copy SourceFiles="SubModule.xml" DestinationFolder="$(GameInstallPath)\Modules\$(ModName)" />
  </Target>
</Project>
